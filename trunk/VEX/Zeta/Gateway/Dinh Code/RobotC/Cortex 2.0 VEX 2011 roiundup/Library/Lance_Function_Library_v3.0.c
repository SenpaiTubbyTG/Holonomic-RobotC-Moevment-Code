#pragma config(Sensor, in2,    ppot,                sensorPotentiometer)
#pragma config(Sensor, dgtl1,  pot,                 sensorNone)
#pragma config(Sensor, dgtl3,  touchl,              sensorTouch)
#pragma config(Sensor, dgtl4,  ncoderR,             sensorQuadEncoder)
#pragma config(Sensor, dgtl6,  touchh,              sensorTouch)
#pragma config(Sensor, dgtl12, TouchGoal,           sensorTouch)
#pragma config(Motor,  port2,           DriveLF,       tmotorNormal, openLoop, reversed)
#pragma config(Motor,  port3,           DriveRF,       tmotorNormal, openLoop)
#pragma config(Motor,  port4,           DriveRB,       tmotorNormal, openLoop)
#pragma config(Motor,  port5,           DriveLB,       tmotorNormal, openLoop, reversed)
#pragma config(Motor,  port6,           lift1,         tmotorNormal, openLoop, reversed)
#pragma config(Motor,  port7,           lift2,         tmotorNormal, openLoop)
#pragma config(Motor,  port8,           lift3,         tmotorNormal, openLoop)
#pragma config(Motor,  port9,           lift4,         tmotorNormal, openLoop, reversed)
#pragma config(Motor,  port10,          Claw,          tmotorNormal, openLoop)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

/*Pot values NOT CODE
arm_grounded = 1250
descore_lock_point = 1680 - 1250 = 430
low_lock_point = 2300 - arm grounded = 1050
high_lock_point = 2587 - arm_grounded = 1337*/



/* Updated...


Pot values NOT CODE
arm_grounded = 1400 or 1250
descore_lock_point = 1748 - 1250(1400) = 347
low_lock_point = 2550 - arm grounded = 1150
descore_high_point =
high_lock_point = 2775 - arm_grounded = 1475

*/

int lock(int final_pos) //locks arm to final_pos potentiometer point
{
  int current_pos = SensorValue(ncoderR); //reads potentiometer
  int direction;                      //up or down?
  int arm_diff = abs(current_pos - final_pos);//difference between current and desired points

  if(arm_diff > 100) {  //potentiometer is very precise, so
    if (current_pos > final_pos) {//arm too high
      direction = 1;    //will move down
    }
    else if(current_pos < final_pos) { //arm too low
      direction = -1; //will move up
    }
    motor[port6] = 127 * direction; //sets motors
    motor[port7] = 127 * direction;
    motor[port8] = 127 * direction;
    motor[port9] = 127* direction;
    return 0;
  }
  else {  //in hindsight, I don't think this is necessary
    motor[port6] = 0;//no need to move for lock; will continue holding. put it back to -10 if it does not work
    motor[port7] = 0;
    motor[port8] = 0;
    motor[port9] = 0;
    return 1;
        }


}
