#pragma config(Sensor, in8,    Gyro,           sensorGyro)
#pragma config(Motor,  port1,           rightMotor,    tmotorNormal, openLoop, reversed)
#pragma config(Motor,  port10,          leftMotor,     tmotorNormal, openLoop)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

const int left = 1;
const int right = 2;
int Error;
int GyroCurrent = 0;
void clearmotor()
{
  motor[leftMotor] = 0;
  motor[rightMotor] = 0;
}
void ClearGyro()
{
  SensorType[in8] = sensorNone;
  wait1Msec(1000);
  SensorType[in8] = sensorGyro;
  wait1Msec(2000);
}
void mediumTurn(int direction)
{
  switch (direction){
  case left:
    motor[leftMotor] = -20;
    motor[rightMotor] =20;
    break;
  case right:
    motor[leftMotor] = 20;
    motor[rightMotor] =-20;
  }

}


void holdPosition(int position, int time)
{
  ClearTimer(T4);
  ClearGyro();
  while(time1[T4] < time*1000)
  {

    if (SensorValue[Gyro] <position*10 -50)
    {
      motor[leftMotor] = -63;
      motor[rightMotor] =63;
    }
    else if (SensorValue[Gyro] >position*10 + 50)
    {
      motor[leftMotor] = 63;
      motor[rightMotor] = -63;//fourth power
    }
    else if (SensorValue[Gyro] < position*10 -15)
    {
      mediumTurn(left);
    }
    else if(SensorValue[Gyro] > position*10+ 15)
    {
      mediumTurn(right);//second power
    }
    else if (SensorValue[Gyro] <position*10 -7)
    {
      motor[leftMotor] = -10;//third power
      motor[rightMotor] =10;

    }
    else if(SensorValue[Gyro] >position*10+ 7)
    {
      motor[leftMotor] = 10;
      motor[rightMotor] =-10;

    }

    else
      clearmotor();
  }//while
  clearmotor();

}



void holdPositionforever(int position)
{
  ClearTimer(T4);
  ClearGyro();
  while(1==1)
  {

    if (SensorValue[Gyro] <position*10 -60)
    {
      motor[leftMotor] = -63;
      motor[rightMotor] =63;
    }
    else if (SensorValue[Gyro] >position*10 + 60)
    {
      motor[leftMotor] = 63;
      motor[rightMotor] = -63;//fourth power
    }
    else if (SensorValue[Gyro] < position*10 -30)
    {
      mediumTurn(left);
    }
    else if(SensorValue[Gyro] > position*10+ 30)
    {
      mediumTurn(right);//second power
    }
    else if (SensorValue[Gyro] <position*10 -15)
    {
      motor[leftMotor] = -10;//third power
      motor[rightMotor] =10;

    }
    else if(SensorValue[Gyro] >position*10+ 15)
    {
      motor[leftMotor] = 10;
      motor[rightMotor] =-10;

    }

    else
      clearmotor();
  }//while


}//function

void TurnP(int position,int direction)
{
SensorValue[Gyro] = 0;
  switch (direction)
  {
  case left:
    while(abs(SensorValue[Gyro]) < position -20)
    {
      Error = position - SensorValue[Gyro];
      int power = Error;

      motor[leftMotor] = -power/10;//more power to make sure that it will turn all the way.
      motor[rightMotor] = power/10;
    }
    clearmotor();
        wait1Msec(250);//let the gyro rest for a bit
    break;
  case right:
    while(abs(SensorValue[Gyro]) < position +20){
      Error = position - SensorValue[Gyro];
      int power = Error;
      motor[leftMotor] = power/10;
      motor[rightMotor] = -power/10 ;// this turn is verrrrry powerful;
    }
    clearmotor();
    wait1Msec(250);//let the gyro rest for a bit
    break;
  }//switch
}//function


/*
void driveGyro(int time,int speed)
{
  ClearGyro();
  ClearTimer(T4);
  while(time*10 > time1[T4])
  {
    if (SensorValue[Gyro] > 10)//if it is turning left
    {
      motor[leftMotor] =  speed;
      motor[rightMotor] = speed-10;
    }
    else if (SensorValue[Gyro] < -10)
    {
      motor[leftMotor] = speed-10;
      motor[rightMotor] = speed;
    }
    else
      motor[leftMotor] = speed;
      motor[rightMotor] = speed;
  }
  clearmotor();
}*///test numberr 1



//90 degrees. For the left the value is 900 for the right it is about 550.





task main()
{
ClearGyro();
TurnP(900,left);
ClearGyro();
TurnP(550,right);
holdPositionforever(0);
// while(true)
// {
// motor[rightMotor]= -vexRT[Ch3];
// motor[leftMotor] = -vexRT[Ch2];
// if (vexRT[Btn7L]== 1)
// TurnP(900,left);

// else if (vexRT[Btn7R] == 1)
// TurnP(550,right);

}
